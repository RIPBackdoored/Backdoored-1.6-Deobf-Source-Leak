package f.b.o.g.d;

import f.b.o.g.*;
import f.b.a.*;
import net.minecraft.network.play.server.*;
import net.minecraftforge.fml.common.eventhandler.*;
import java.util.*;
import f.b.q.c.*;
import f.b.g.*;

@c$b(name = "Vanish Detector", description = "Detect players in vanish", category = f.b.o.c.c.EXPLOIT)
public class s extends c
{
    private final HashMap<UUID, String> sz;
    
    public s() {
        super();
        this.sz = new HashMap<UUID, String>();
    }
    
    @SubscribeEvent
    public void c(final v v) {
        if (v.packet instanceof SPacketPlayerListItem && this.bu()) {
            final SPacketPlayerListItem v2 = (SPacketPlayerListItem)v.packet;
            if (v2.getAction() == SPacketPlayerListItem.Action.UPDATE_LATENCY) {
                final Set<UUID> v3 = new HashSet<UUID>();
                for (final SPacketPlayerListItem.AddPlayerData v4 : v2.getEntries()) {
                    if (s.mc.getConnection().getPlayerInfo(v4.getProfile().getId()) == null) {
                        v3.add(v4.getProfile().getId());
                    }
                }
                new Thread(this::a, "Vanish thing idk").start();
            }
        }
    }
    
    public void bh() {
        synchronized (this.sz) {
            for (final Map.Entry<UUID, String> v : this.sz.entrySet()) {
                o.i("Player " + v.getValue() + " has gone into vanish (" + v.getKey() + ")", "gold");
            }
            this.sz.clear();
        }
    }
    
    private /* synthetic */ void a(final Set v) {
        for (final UUID v2 : v) {
            this.sz.put(v2, a.r(v2.toString()));
        }
    }
}
