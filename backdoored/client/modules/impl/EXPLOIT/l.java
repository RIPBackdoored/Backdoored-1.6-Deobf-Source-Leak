package f.b.o.g.d;

import f.b.o.g.*;
import java.time.*;
import f.b.q.*;
import net.minecraft.init.*;
import net.minecraft.inventory.*;
import net.minecraft.entity.player.*;
import net.minecraft.client.*;
import net.minecraftforge.fml.common.*;
import f.b.q.c.*;
import net.minecraft.item.*;

@c$b(name = "Map Spam", description = "Spams maps in order to cause a map reset", category = f.b.o.c.c.EXPLOIT)
public class l extends c
{
    private f.b.f.c sa;
    private Instant sb;
    
    public l() {
        super();
        this.sa = new f.b.f.c("Delay", this, 1.0, 0.1, 4.0);
        this.sb = Instant.EPOCH;
    }
    
    public void bh() {
        if (this.bu() && j.a(this.sb, Instant.now(), Math.round(this.sa.ck() * 1000.0))) {
            for (int v = 0; v < l.mc.player.inventory.getSizeInventory(); ++v) {
                final Item v2 = l.mc.player.inventory.getStackInSlot(v).getItem();
                final boolean v3 = v2.equals(Items.FILLED_MAP);
                final boolean v4 = l.mc.player.inventory.getStackInSlot(v).getItem().equals(Items.MAP);
                if (v3 && !v4) {
                    l.mc.playerController.windowClick(0, (v < 9) ? (v + 36) : v, 0, ClickType.PICKUP, (EntityPlayer)l.mc.player);
                    l.mc.playerController.windowClick(0, 45, 0, ClickType.PICKUP, (EntityPlayer)l.mc.player);
                    l.mc.playerController.windowClick(0, -999, 0, ClickType.PICKUP, (EntityPlayer)l.mc.player);
                    break;
                }
            }
            if (l.mc.player.getHeldItemMainhand().getItem().equals(Items.MAP) && !l.mc.player.getHeldItemMainhand().getItem().equals(Items.FILLED_MAP)) {
                try {
                    ObfuscationReflectionHelper.findMethod((Class)Minecraft.class, "func_147121_ag", (Class)Void.TYPE, new Class[0]).invoke(l.mc, new Object[0]);
                }
                catch (Exception v5) {
                    o.i("Disabled Map Spam due to error: " + v5.getMessage(), "red");
                    v5.printStackTrace();
                    this.a(false);
                }
                this.sb = Instant.now();
            }
        }
    }
}
